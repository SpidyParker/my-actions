name: CI
run-name: "CI workflow"

on:
    workflow_dispatch:
      inputs:
        stage:
          description: "Environment"
          type: "string"
          required: true
        version:
          description: "version"
          required: true

jobs:
    context:
        runs-on: ubuntu-latest
        steps:
        - uses: actions/checkout@v3
        - name: Print inputs in JSON 
          run: echo "${{ toJSON(github.event.inputs) }}"
        - name: Try setting up env
          run: |
            while IFS== read key value; do
              printf -v "$key" "$value"
            done << (echo "${{ toJSON(github.event.inputs) }}" | jq -r 'to_entries|map("\(.key)=\(.value|tostring)")|.[]')
        - name: "Setup a User"
          run : |
            echo "NAME=Raj" >> $GITHUB_ENV
            echo "HOBBY=OpenSource" >> $GITHUB_ENV
        - name : "Run Script"
          run: ./script.sh
        